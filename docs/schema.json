{
  "$schema": "http://json-schema.org/draft-04/schema#",
  "id": "https://lonelyplanet.github.io/apple-news-format-schema/schema.json",
  "title": "Apple News Format schema",
  "description": "Describes article.json",
  "type": "object",
  "additionalProperties": false,
  "properties": {
    "version": {
      "type": "string",
      "pattern": "^[0-9]+\\.[0-9]+$"
    },
    "identifier": {
      "type": "string",
      "pattern": "^[a-zA-Z0-9_-]{1,64}$"
    },
    "title": {
      "type": "string"
    },
    "language": {
      "type": "string"
    },
    "layout": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "columns": {
          "$ref": "#/definitions/absIntMin1"
        },
        "width": {
          "$ref": "#/definitions/absIntMin1"
        },
        "gutter": {
          "$ref": "#/definitions/absInt"
        },
        "margin": {
          "$ref": "#/definitions/absInt"
        }
      },
      "required": [
        "columns",
        "width"
      ]
    },
    "components": {
      "type": "array",
      "items": {
        "anyOf": [
          {
            "$ref": "#/definitions/anyComponent"
          },
          {
            "$ref": "#/definitions/bannerAdvertisementComponent"
          },
          {
            "$ref": "#/definitions/mediumRectangleAdvertisementComponent"
          }
        ]
      }
    },
    "advertisingSettings": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "bannerType": {
          "$ref": "#/definitions/bannerType"
        },
        "frequency": {
          "type": "integer",
          "multipleOf": 1.0,
          "minimum": 0,
          "maximum": 10
        },
        "layout": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "margin": {
              "$ref": "#/definitions/margin"
            }
          },
          "required": [
            "margin"
          ]
        }
      }
    },
    "subtitle": {
      "type": "string"
    },
    "metadata": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "authors": {
          "$ref": "#/definitions/uniqueStringsArray"
        },
        "campaignData": {
          "type": "object"
        },
        "canonicalURL": {
          "$ref": "#/definitions/httpURL"
        },
        "coverArt": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/coverArt"
          }
        },
        "excerpt": {
          "type": "string"
        },
        "keywords": {
          "allOf": [
            {
              "$ref": "#/definitions/uniqueStringsArray"
            },
            {
              "maxItems": 50
            }
          ]
        },
        "thumbnailURL": {
          "$ref": "#/definitions/URL"
        },
        "transparentToolbar": {
          "type": "boolean"
        },
        "videoURL": {
          "$ref": "#/definitions/httpURL"
        }
      },
      "patternProperties": {
        "^date(Created|Modified|Published)$": {
          "$ref": "#/definitions/iso8601"
        },
        "^generator(Identifier|Name|Version)$": {
          "type": "string"
        }
      }
    },
    "documentStyle": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "backgroundColor": {
          "$ref": "#/definitions/hexColor"
        }
      },
      "required": [
        "backgroundColor"
      ]
    },
    "textStyles": {
      "type": "object",
      "patternProperties": {
        ".+": {
          "$ref": "#/definitions/textStyle"
        }
      }
    },
    "componentLayouts": {
      "type": "object",
      "patternProperties": {
        ".+": {
          "$ref": "#/definitions/componentLayout"
        }
      }
    },
    "componentStyles": {
      "type": "object",
      "patternProperties": {
        ".+": {
          "$ref": "#/definitions/componentStyle"
        }
      }
    },
    "componentTextStyles": {
      "type": "object",
      "patternProperties": {
        ".+": {
          "$ref": "#/definitions/componentTextStyle"
        }
      }
    }
  },
  "required": [
    "version",
    "identifier",
    "title",
    "language",
    "layout",
    "components"
  ],
  "definitions": {
    "abstractScene": {
      "type": "object",
      "properties": {
        "type": {
          "type": "string"
        }
      },
      "required": [
        "type"
      ]
    },
    "fadingStickyHeaderScene": {
      "allOf": [
        {
          "$ref": "#/definitions/abstractScene"
        },
        {
          "properties": {
            "type": {
              "enum": [
                "fading_sticky_header"
              ]
            },
            "fadeColor": {
              "$ref": "#/definitions/hexColor"
            }
          }
        }
      ]
    },
    "parallaxScaleHeaderScene": {
      "allOf": [
        {
          "$ref": "#/definitions/abstractScene"
        },
        {
          "properties": {
            "type": {
              "enum": [
                "parallax_scale"
              ]
            }
          }
        }
      ]
    },
    "anyScene": {
      "anyOf": [
        {
          "$ref": "#/definitions/fadingStickyHeaderScene"
        },
        {
          "$ref": "#/definitions/parallaxScaleHeaderScene"
        }
      ]
    },
    "componentsArray": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/anyComponent"
      }
    },
    "bannerType": {
      "type": "string",
      "enum": [
        "any",
        "standard",
        "double_height",
        "large"
      ],
      "default": "any"
    },
    "margin": {
      "oneOf": [
        {
          "$ref": "#/definitions/absInt"
        },
        {
          "type": "object",
          "patternProperties": {
            "^(top|bottom)$": {
              "$ref": "#/definitions/unitsOfMeasure"
            }
          }
        }
      ]
    },
    "fillMode": {
      "type": "string",
      "enum": [
        "fit",
        "cover"
      ]
    },
    "horizontalAlignment": {
      "type": "string",
      "enum": [
        "left",
        "center",
        "right"
      ]
    },
    "verticalAlignment": {
      "type": "string",
      "enum": [
        "top",
        "center",
        "bottom"
      ]
    },
    "httpURL": {
      "type": "string",
      "pattern": "^https?://.+",
      "format": "uri"
    },
    "bundleURL": {
      "type": "string",
      "pattern": "^bundle://.+",
      "format": "uri"
    },
    "URL": {
      "type": "string",
      "pattern": "^(bundle|https?)://.+",
      "format": "uri"
    },
    "colorStop": {
      "typpe": "object",
      "additionalProperties": false,
      "properties": {
        "color": {
          "$ref": "#/definitions/hexColor"
        },
        "location": {
          "$ref": "#/definitions/percentage"
        }
      },
      "required": [
        "color"
      ]
    },
    "linearGradient": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "type": {
          "type": "string",
          "enum": [
            "linear_gradient"
          ]
        },
        "colorStops": {
          "type": "array",
          "minItems": 1,
          "items": {
            "$ref": "#/definitions/colorStop"
          }
        },
        "angle": {
          "$ref": "#/definitions/degree"
        }
      },
      "required": [
        "type",
        "colorStops"
      ]
    },
    "videoFill": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "type": {
          "type": "string",
          "enum": [
            "video"
          ]
        },
        "URL": {
          "$ref": "#/definitions/httpURL"
        },
        "stillURL": {
          "$ref": "#/definitions/URL"
        },
        "fillMode": {
          "$ref": "#/definitions/fillMode"
        },
        "horizontalAlignment": {
          "$ref": "#/definitions/horizontalAlignment"
        },
        "verticalAlignment": {
          "$ref": "#/definitions/verticalAlignment"
        },
        "loop": {
          "type": "boolean"
        }
      },
      "required": [
        "type",
        "URL",
        "stillURL"
      ]
    },
    "imageFill": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "type": {
          "type": "string",
          "enum": [
            "image"
          ]
        },
        "URL": {
          "$ref": "#/definitions/URL"
        },
        "attachment": {
          "type": "string",
          "enum": [
            "scroll",
            "fixed"
          ]
        },
        "fillMode": {
          "$ref": "#/definitions/fillMode"
        },
        "horizontalAlignment": {
          "$ref": "#/definitions/horizontalAlignment"
        },
        "verticalAlignment": {
          "$ref": "#/definitions/verticalAlignment"
        }
      },
      "required": [
        "type",
        "URL"
      ]
    },
    "uniqueStringsArray": {
      "type": "array",
      "uniqueItems": true,
      "items": {
        "type": "string"
      }
    },
    "componentTextStyle": {
      "allOf": [
        {
          "$ref": "#/definitions/textStyle"
        },
        {
          "properties": {
            "dropCapStyle": {
              "type": "object",
              "additionalProperties": false,
              "properties": {
                "numberOfLines": {
                  "type": "integer",
                  "multipleOf": 1.0,
                  "minimum": 2,
                  "maximum": 10
                },
                "backgroundColor": {
                  "$ref": "#/definitions/hexColor"
                },
                "fontName": {
                  "type": "string"
                },
                "numberOfCharacters": {
                  "type": "integer",
                  "multipleOf": 1.0,
                  "minimum": 1,
                  "maximum": 4
                },
                "numberOfRaisedLines": {
                  "$ref": "#/definitions/absInt"
                },
                "padding": {
                  "$ref": "#/definitions/absInt"
                },
                "textColor": {
                  "$ref": "#/definitions/hexColor"
                }
              },
              "required": [
                "numberOfLines"
              ]
            },
            "firstLineIndent": {
              "$ref": "#/definitions/absInt"
            },
            "hangingPunctuation": {
              "type": "boolean"
            },
            "hyphenation": {
              "type": "boolean"
            },
            "lineHeight": {
              "$ref": "#/definitions/absInt"
            },
            "linkStyle": {
              "$ref": "#/definitions/textStyle"
            },
            "paragraphSpacingBefore": {
              "$ref": "#/definitions/absInt"
            },
            "paragraphSpacingAfter": {
              "$ref": "#/definitions/absInt"
            },
            "textAlignment": {
              "type": "string",
              "enum": [
                "left",
                "right",
                "center",
                "justified",
                "none"
              ]
            },
            "textShadow": {
              "$ref": "#/definitions/textShadow"
            }
          }
        }
      ]
    },
    "strokeStyle": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "color": {
          "$ref": "#/definitions/hexColor"
        },
        "width": {
          "$ref": "#/definitions/unitsOfMeasure"
        },
        "style": {
          "type": "string",
          "enum": [
            "solid",
            "dashed",
            "dotted"
          ]
        }
      }
    },
    "border": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "all": {
          "$ref": "#/definitions/strokeStyle"
        },
        "top": {
          "type": "boolean"
        },
        "right": {
          "type": "boolean"
        },
        "bottom": {
          "type": "boolean"
        },
        "left": {
          "type": "boolean"
        }
      }
    },
    "componentStyle": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "backgroundColor": {
          "$ref": "#/definitions/hexColor"
        },
        "fill": {
          "anyOf": [
            {
              "$ref": "#/definitions/imageFill"
            },
            {
              "$ref": "#/definitions/videoFill"
            },
            {
              "$ref": "#/definitions/linearGradient"
            }
          ]
        },
        "opacity": {
          "$ref": "#/definitions/percentage"
        },
        "border": {
          "$ref": "#/definitions/border"
        }
      }
    },
    "componentLayout": {
      "type": "object",
      "properties": {
        "columnSpan": {
          "$ref": "#/definitions/absIntMin1"
        },
        "columnStart": {
          "$ref": "#/definitions/absInt"
        },
        "contentInset": {
          "oneOf": [
            {
              "type": "boolean"
            },
            {
              "type": "object",
              "patternProperties": {
                "^(top|right|bottom|left)$": {
                  "type": "boolean",
                  "default": false
                }
              }
            }
          ]
        },
        "horizontalContentAlignment": {
          "$ref": "#/definitions/horizontalAlignment"
        },
        "margin": {
          "$ref": "#/definitions/margin"
        },
        "maximumContentWidth": {
          "$ref": "#/definitions/unitsOfMeasure"
        },
        "minimumHeight": {
          "$ref": "#/definitions/unitsOfMeasure"
        }
      },
      "patternProperties": {
        "^ignoreDocument(Gutter|Margin)$": {
          "oneOf": [
            {
              "type": "boolean"
            },
            {
              "type": "string",
              "enum": [
                "none",
                "left",
                "right",
                "both"
              ]
            }
          ],
          "default": "none"
        }
      }
    },
    "textShadow": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "color": {
          "$ref": "#/definitions/hexColor"
        },
        "radius": {
          "type": "number",
          "minimum": 0,
          "maximum": 100
        },
        "opacity": {
          "$ref": "#/definitions/percentage"
        },
        "offset": {
          "type": "object",
          "additionalProperties": false,
          "patternProperties": {
            "^[xy]$": {
              "$ref": "#/definitions/shadowOffsetNumber"
            }
          },
          "required": [
            "x",
            "y"
          ]
        }
      },
      "required": [
        "color",
        "radius"
      ]
    },
    "textStyle": {
      "type": "object",
      "properties": {
        "backgroundColor": {
          "$ref": "#/definitions/hexColor"
        },
        "fontName": {
          "type": "string"
        },
        "fontSize": {
          "$ref": "#/definitions/absIntMin1"
        },
        "orderedListItems": {
          "$ref": "#/definitions/listItemStyle"
        },
        "unorderedListItems": {
          "$ref": "#/definitions/listItemStyle"
        },
        "strikethrough": {
          "oneOf": [
            {
              "type": "boolean"
            },
            {
              "$ref": "#/definitions/textDecoration"
            }
          ]
        },
        "stroke": {
          "$ref": "#/definitions/textDecoration",
          "required": [
            "color"
          ]
        },
        "textColor": {
          "$ref": "#/definitions/hexColor"
        },
        "textShadow": {
          "$ref": "#/definitions/textShadow"
        },
        "tracking": {
          "$ref": "#/definitions/percentage"
        },
        "underline": {
          "oneOf": [
            {
              "type": "boolean"
            },
            {
              "$ref": "#/definitions/textDecoration"
            }
          ]
        },
        "verticalAlignment": {
          "type": "string",
          "enum": [
            "superscript",
            "subscript",
            "baseline"
          ]
        }
      }
    },
    "inlineTextStyle": {
      "type": "object",
      "properties": {
        "rangeLength": {
          "$ref": "#/definitions/absInt"
        },
        "rangeStart": {
          "$ref": "#/definitions/absInt"
        },
        "textStyle": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "$ref": "#/definitions/textStyle"
            }
          ]
        }
      },
      "required": [
        "rangeLength",
        "rangeStart",
        "textStyle"
      ]
    },
    "degree": {
      "type": "number",
      "minimum": -360,
      "maximum": 360
    },
    "percentage": {
      "type": "number",
      "minimum": 0,
      "maximum": 1
    },
    "shadowOffsetNumber": {
      "type": "number",
      "minimum": -50,
      "maximum": 50
    },
    "textDecoration": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "color": {
          "$ref": "#/definitions/hexColor"
        },
        "width": {
          "$ref": "#/definitions/absIntMin1"
        }
      }
    },
    "listItemStyle": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "type": {
          "type": "string",
          "enum": [
            "bullet",
            "decimal",
            "lower_alphabetical",
            "upper_alphabetical",
            "lower_roman",
            "upper_roman",
            "character",
            "none"
          ]
        },
        "character": {
          "type": "string",
          "maxLength": 1
        }
      },
      "required": [
        "type"
      ]
    },
    "hexColor": {
      "type": "string",
      "pattern": "^#([a-fA-F0-9]{3}|[a-fA-F0-9]{6}|[a-fA-F0-9]{8})$"
    },
    "iso8601": {
      "type": "string",
      "pattern": "^(19|[2-9][0-9])[0-9]{2}-(0[1-9]|1[0-2])-(0[1-9]|([12][0-9]|3[01]))T([01][0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9]\\+([01][0-9]|2[0-3]):[0-5][0-9]$",
      "format": "date-time"
    },
    "absInt": {
      "type": "integer",
      "multipleOf": 1.0,
      "minimum": 0
    },
    "absIntMin1": {
      "type": "integer",
      "multipleOf": 1.0,
      "minimum": 1
    },
    "unitsOfMeasure": {
      "oneOf": [
        {
          "$ref": "#/definitions/absInt"
        },
        {
          "type": "string",
          "pattern": "^[0-9]+(v(h|w|min|max)|gut|cw|pt)$"
        }
      ]
    },
    "anchor": {
      "type": "object",
      "properties": {
        "targetAnchorPosition": {
          "$ref": "#/definitions/verticalAlignment"
        },
        "originAnchorPosition": {
          "$ref": "#/definitions/verticalAlignment"
        },
        "rangeLength": {
          "$ref": "#/definitions/absInt"
        },
        "rangeStart": {
          "$ref": "#/definitions/absInt"
        },
        "targetComponentIdentifier": {
          "type": "string"
        }
      },
      "required": [
        "targetAnchorPosition"
      ]
    },
    "abstractAnimation": {
      "type": "object",
      "properties": {
        "type": {
          "type": "string"
        },
        "userControllable": {
          "type": "boolean"
        }
      },
      "required": [
        "type"
      ]
    },
    "appearAnimation": {
      "allOf": [
        {
          "$ref": "#/definitions/abstractAnimation"
        },
        {
          "properties": {
            "type": {
              "enum": [
                "appear"
              ]
            }
          }
        }
      ]
    },
    "fadeInAnimation": {
      "allOf": [
        {
          "$ref": "#/definitions/abstractAnimation"
        },
        {
          "properties": {
            "type": {
              "enum": [
                "fade_in"
              ]
            },
            "initialAlpha": {
              "$ref": "#/definitions/percentage"
            }
          }
        }
      ]
    },
    "moveInAnimation": {
      "allOf": [
        {
          "$ref": "#/definitions/abstractAnimation"
        },
        {
          "properties": {
            "type": {
              "enum": [
                "move_in"
              ]
            },
            "preferredStartingPosition": {
              "type": "string",
              "enum": [
                "left",
                "right"
              ]
            }
          }
        }
      ]
    },
    "scaleFadeAnimation": {
      "allOf": [
        {
          "$ref": "#/definitions/abstractAnimation"
        },
        {
          "properties": {
            "type": {
              "enum": [
                "scale_fade"
              ]
            },
            "initialAlpha": {
              "$ref": "#/definitions/percentage"
            },
            "initialScale": {
              "$ref": "#/definitions/percentage"
            }
          }
        }
      ]
    },
    "anyAnimation": {
      "anyOf": [
        {
          "$ref": "#/definitions/appearAnimation"
        },
        {
          "$ref": "#/definitions/fadeInAnimation"
        },
        {
          "$ref": "#/definitions/moveInAnimation"
        },
        {
          "$ref": "#/definitions/scaleFadeAnimation"
        }
      ]
    },
    "abstractBehavior": {
      "type": "object",
      "properties": {
        "type": {
          "type": "string"
        }
      },
      "required": [
        "type"
      ]
    },
    "backgroundMotionBehavior": {
      "allOf": [
        {
          "$ref": "#/definitions/abstractBehavior"
        },
        {
          "properties": {
            "type": {
              "enum": [
                "background_motion"
              ]
            }
          }
        }
      ]
    },
    "backgroundParallaxBehavior": {
      "allOf": [
        {
          "$ref": "#/definitions/abstractBehavior"
        },
        {
          "properties": {
            "type": {
              "enum": [
                "background_parallax"
              ]
            }
          }
        }
      ]
    },
    "motionBehavior": {
      "allOf": [
        {
          "$ref": "#/definitions/abstractBehavior"
        },
        {
          "properties": {
            "type": {
              "enum": [
                "motion"
              ]
            }
          }
        }
      ]
    },
    "parallaxBehavior": {
      "allOf": [
        {
          "$ref": "#/definitions/abstractBehavior"
        },
        {
          "properties": {
            "type": {
              "enum": [
                "parallax"
              ]
            },
            "factor": {
              "type": "number",
              "minimum": 0.5,
              "maximum": 2.0
            }
          }
        }
      ]
    },
    "springyBehavior": {
      "allOf": [
        {
          "$ref": "#/definitions/abstractBehavior"
        },
        {
          "properties": {
            "type": {
              "enum": [
                "springy"
              ]
            }
          }
        }
      ]
    },
    "anyBehavior": {
      "anyOf": [
        {
          "$ref": "#/definitions/backgroundMotionBehavior"
        },
        {
          "$ref": "#/definitions/backgroundParallaxBehavior"
        },
        {
          "$ref": "#/definitions/motionBehavior"
        },
        {
          "$ref": "#/definitions/parallaxBehavior"
        },
        {
          "$ref": "#/definitions/springyBehavior"
        }
      ]
    },
    "anyComponent": {
      "anyOf": [
        {
          "$ref": "#/definitions/textualComponent"
        },
        {
          "$ref": "#/definitions/audioComponent"
        },
        {
          "$ref": "#/definitions/containerComponent"
        },
        {
          "$ref": "#/definitions/sectionComponent"
        },
        {
          "$ref": "#/definitions/chapterComponent"
        },
        {
          "$ref": "#/definitions/headerComponent"
        },
        {
          "$ref": "#/definitions/dividerComponent"
        },
        {
          "$ref": "#/definitions/embedWebVideoComponent"
        },
        {
          "$ref": "#/definitions/videoComponent"
        },
        {
          "$ref": "#/definitions/facebookPostComponent"
        },
        {
          "$ref": "#/definitions/instagramComponent"
        },
        {
          "$ref": "#/definitions/tweetComponent"
        },
        {
          "$ref": "#/definitions/vinePostComponent"
        },
        {
          "$ref": "#/definitions/imageComponent"
        },
        {
          "$ref": "#/definitions/photoComponent"
        },
        {
          "$ref": "#/definitions/galleryComponent"
        },
        {
          "$ref": "#/definitions/mapComponent"
        }
      ]
    },
    "abstractComponent": {
      "type": "object",
      "properties": {
        "role": {
          "type": "string"
        },
        "anchor": {
          "$ref": "#/definitions/anchor"
        },
        "identifier": {
          "type": "string"
        },
        "layout": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "$ref": "#/definitions/componentLayout"
            }
          ]
        },
        "style": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "$ref": "#/definitions/componentStyle"
            }
          ]
        }
      },
      "required": [
        "role"
      ]
    },
    "animatableComponent": {
      "allOf": [
        {
          "$ref": "#/definitions/abstractComponent"
        },
        {
          "$ref": "#/definitions/hasAnimations"
        }
      ]
    },
    "abstractTextComponent": {
      "allOf": [
        {
          "$ref": "#/definitions/animatableComponent"
        },
        {
          "$ref": "#/definitions/captionDescriptor"
        }
      ]
    },
    "textualComponent": {
      "allOf": [
        {
          "$ref": "#/definitions/abstractTextComponent"
        },
        {
          "properties": {
            "role": {
              "enum": [
                "author",
                "body",
                "byline",
                "caption",
                "heading",
                "heading1",
                "heading2",
                "heading3",
                "heading4",
                "heading5",
                "heading6",
                "illustrator",
                "intro",
                "photographer",
                "pullquote",
                "quote",
                "title"
              ]
            }
          }
        }
      ]
    },
    "bannerAdvertisementComponent": {
      "allOf": [
        {
          "$ref": "#/definitions/abstractComponent"
        },
        {
          "properties": {
            "role": {
              "enum": [
                "banner_advertisement"
              ]
            },
            "bannerType": {
              "$ref": "#/definitions/bannerType"
            }
          }
        }
      ]
    },
    "mediumRectangleAdvertisementComponent": {
      "allOf": [
        {
          "$ref": "#/definitions/abstractComponent"
        },
        {
          "properties": {
            "role": {
              "enum": [
                "medium_rectangle_advertisement"
              ]
            }
          }
        }
      ]
    },
    "containerComponent": {
      "allOf": [
        {
          "$ref": "#/definitions/abstractComponent"
        },
        {
          "properties": {
            "role": {
              "enum": [
                "container"
              ]
            },
            "components": {
              "$ref": "#/definitions/componentsArray"
            }
          }
        }
      ]
    },
    "chapterComponent": {
      "allOf": [
        {
          "$ref": "#/definitions/abstractComponent"
        },
        {
          "properties": {
            "role": {
              "enum": [
                "chapter"
              ]
            },
            "components": {
              "$ref": "#/definitions/componentsArray"
            },
            "scene": {
              "$ref": "#/definitions/anyScene"
            }
          }
        }
      ]
    },
    "headerComponent": {
      "allOf": [
        {
          "$ref": "#/definitions/animatableComponent"
        },
        {
          "properties": {
            "role": {
              "enum": [
                "header"
              ]
            },
            "components": {
              "$ref": "#/definitions/componentsArray"
            }
          }
        }
      ]
    },
    "sectionComponent": {
      "allOf": [
        {
          "$ref": "#/definitions/abstractComponent"
        },
        {
          "properties": {
            "role": {
              "enum": [
                "section"
              ]
            },
            "components": {
              "$ref": "#/definitions/componentsArray"
            },
            "scene": {
              "$ref": "#/definitions/anyScene"
            }
          }
        }
      ]
    },
    "dividerComponent": {
      "allOf": [
        {
          "$ref": "#/definitions/animatableComponent"
        },
        {
          "properties": {
            "role": {
              "enum": [
                "divider"
              ]
            },
            "stroke": {
              "$ref": "#/definitions/strokeStyle"
            }
          }
        }
      ]
    },
    "abstractVideoComponent": {
      "allOf": [
        {
          "$ref": "#/definitions/animatableComponent"
        },
        {
          "properties": {
            "URL": {
              "$ref": "#/definitions/httpURL"
            },
            "accessibilityCaption": {
              "type": "string"
            },
            "aspectRatio": {
              "type": "number",
              "default": 1.777
            },
            "caption": {
              "type": "string"
            },
            "explicitContent": {
              "type": "boolean",
              "default": false
            }
          },
          "required": [
            "URL"
          ]
        }
      ]
    },
    "videoComponent": {
      "allOf": [
        {
          "$ref": "#/definitions/abstractVideoComponent"
        },
        {
          "properties": {
            "role": {
              "enum": [
                "video"
              ]
            },
            "stillURL": {
              "$ref": "#/definitions/URL"
            }
          }
        }
      ]
    },
    "embedWebVideoComponent": {
      "allOf": [
        {
          "$ref": "#/definitions/abstractVideoComponent"
        },
        {
          "properties": {
            "role": {
              "enum": [
                "embedwebvideo",
                "embedvideo"
              ]
            },
            "URL": {
              "pattern": "^https://(player\\.vimeo\\.com|www\\.youtube\\.com)/.+"
            }
          }
        }
      ]
    },
    "facebookPostComponent": {
      "allOf": [
        {
          "$ref": "#/definitions/abstractComponent"
        },
        {
          "properties": {
            "role": {
              "enum": [
                "facebook_post"
              ]
            },
            "URL": {
              "allOf": [
                {
                  "$ref": "#/definitions/httpURL"
                },
                {
                  "pattern": "^https://www.facebook.com/.+"
                }
              ]
            }
          },
          "required": [
            "URL"
          ]
        }
      ]
    },
    "instagramComponent": {
      "allOf": [
        {
          "$ref": "#/definitions/abstractComponent"
        },
        {
          "properties": {
            "role": {
              "enum": [
                "instagram"
              ]
            },
            "URL": {
              "allOf": [
                {
                  "$ref": "#/definitions/httpURL"
                },
                {
                  "pattern": "instagram\\.com/.+"
                }
              ]
            }
          },
          "required": [
            "URL"
          ]
        }
      ]
    },
    "tweetComponent": {
      "allOf": [
        {
          "$ref": "#/definitions/abstractComponent"
        },
        {
          "properties": {
            "role": {
              "enum": [
                "tweet"
              ]
            },
            "URL": {
              "allOf": [
                {
                  "$ref": "#/definitions/httpURL"
                },
                {
                  "pattern": "twitter\\.com/.+"
                }
              ]
            }
          },
          "required": [
            "URL"
          ]
        }
      ]
    },
    "vinePostComponent": {
      "allOf": [
        {
          "$ref": "#/definitions/abstractComponent"
        },
        {
          "properties": {
            "role": {
              "enum": [
                "vine_post"
              ]
            },
            "URL": {
              "allOf": [
                {
                  "$ref": "#/definitions/httpURL"
                },
                {
                  "pattern": "^https://vine\\.co/.+"
                }
              ]
            }
          },
          "required": [
            "URL"
          ]
        }
      ]
    },
    "abstractMapComponent": {
      "allOf": [
        {
          "$ref": "#/definitions/animatableComponent"
        },
        {
          "$ref": "#/definitions/hasCaptions"
        },
        {
          "properties": {
            "latitude": {
              "$ref": "#/definitions/latitude"
            },
            "longitude": {
              "$ref": "#/definitions/longitude"
            },
            "mapType": {
              "type": "string",
              "enum": [
                "standard",
                "hybrid",
                "satellite"
              ],
              "default": "standard"
            },
            "span": {
              "type": "object",
              "properties": {
                "latitudeDelta": {
                  "type": "number",
                  "minimum": 0.0,
                  "maximum": 90.0
                },
                "longitudeDelta": {
                  "type": "number",
                  "minimum": 0.0,
                  "maximum": 180.0
                }
              },
              "required": [
                "latitudeDelta",
                "longitudeDelta"
              ]
            }
          }
        }
      ]
    },
    "mapComponent": {
      "allOf": [
        {
          "$ref": "#/definitions/abstractMapComponent"
        },
        {
          "properties": {
            "role": {
              "enum": [
                "map"
              ]
            },
            "items": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/mapItem"
              }
            }
          }
        }
      ]
    },
    "placeComponent": {
      "allOf": [
        {
          "$ref": "#/definitions/abstractMapComponent"
        },
        {
          "properties": {
            "role": {
              "enum": [
                "place"
              ]
            }
          },
          "required": [
            "latitude",
            "longitude"
          ]
        }
      ]
    },
    "latitude": {
      "type": "number",
      "minimum": -90.0,
      "maximum": 90.0
    },
    "longitude": {
      "type": "number",
      "minimum": -180.0,
      "maximum": 180.0
    },
    "mapItem": {
      "type": "object",
      "properties": {
        "latitude": {
          "$ref": "#/definitions/latitude"
        },
        "longitude": {
          "$ref": "#/definitions/longitude"
        },
        "caption": {
          "type": "string"
        }
      },
      "required": [
        "latitude",
        "longitude"
      ]
    },
    "abstractImageComponent": {
      "allOf": [
        {
          "$ref": "#/definitions/animatableComponent"
        },
        {
          "$ref": "#/definitions/hasCaptions"
        },
        {
          "properties": {
            "role": {
              "enum": [
                "figure",
                "image",
                "logo",
                "photo",
                "portrait"
              ]
            },
            "URL": {
              "$ref": "#/definitions/URL"
            }
          },
          "required": [
            "URL"
          ]
        }
      ]
    },
    "imageComponent": {
      "allOf": [
        {
          "$ref": "#/definitions/abstractImageComponent"
        },
        {
          "properties": {
            "role": {
              "enum": [
                "figure",
                "image",
                "logo"
              ]
            },
            "caption": {
              "type": "string"
            }
          }
        }
      ]
    },
    "photoComponent": {
      "allOf": [
        {
          "$ref": "#/definitions/abstractImageComponent"
        },
        {
          "properties": {
            "role": {
              "enum": [
                "photo",
                "portrait"
              ]
            }
          }
        }
      ]
    },
    "galleryComponent": {
      "allOf": [
        {
          "$ref": "#/definitions/animatableComponent"
        },
        {
          "properties": {
            "role": {
              "enum": [
                "gallery",
                "mosaic"
              ]
            },
            "items": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/galleryItem"
              }
            }
          }
        }
      ]
    },
    "galleryItem": {
      "allOf": [
        {
          "$ref": "#/definitions/hasCaptions"
        },
        {
          "type": "object",
          "properties": {
            "URL": {
              "$ref": "#/definitions/URL"
            },
            "explicitContent": {
              "$ref": "#/definitions/explicitContent"
            }
          },
          "required": [
            "URL"
          ]
        }
      ]
    },
    "captionDescriptor": {
      "type": "object",
      "properties": {
        "text": {
          "type": "string"
        },
        "additions": {
          "$ref": "#/definitions/additions"
        },
        "format": {
          "$ref": "#/definitions/format"
        },
        "inlineTextStyles": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/inlineTextStyle"
          }
        },
        "textStyle": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "$ref": "#/definitions/componentTextStyle"
            }
          ]
        }
      },
      "required": [
        "text"
      ]
    },
    "audioComponent": {
      "allOf": [
        {
          "$ref": "#/definitions/animatableComponent"
        },
        {
          "$ref": "#/definitions/hasCaptions"
        },
        {
          "properties": {
            "role": {
              "enum": [
                "audio",
                "music"
              ]
            },
            "URL": {
              "$ref": "#/definitions/httpURL"
            },
            "explicitContent": {
              "$ref": "#/definitions/explicitContent"
            },
            "imageURL": {
              "$ref": "#/definitions/URL"
            }
          },
          "required": [
            "URL"
          ]
        }
      ]
    },
    "hasAnimations": {
      "type": "object",
      "properties": {
        "animation": {
          "$ref": "#/definitions/anyAnimation"
        },
        "behavior": {
          "$ref": "#/definitions/anyBehavior"
        }
      }
    },
    "hasCaptions": {
      "type": "object",
      "properties": {
        "accessibilityCaption": {
          "type": "string"
        },
        "caption": {
          "$ref": "#/definitions/caption"
        }
      }
    },
    "caption": {
      "oneOf": [
        {
          "type": "string"
        },
        {
          "$ref": "#/definitions/captionDescriptor"
        }
      ]
    },
    "explicitContent": {
      "type": "boolean",
      "default": false
    },
    "format": {
      "type": "string",
      "enum": [
        "html",
        "markdown",
        "none"
      ],
      "default": "none"
    },
    "additions": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/linkAddition"
      }
    },
    "linkAddition": {
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "enum": [
            "link"
          ]
        },
        "rangeLength": {
          "$ref": "#/definitions/absInt"
        },
        "rangeStart": {
          "$ref": "#/definitions/absInt"
        },
        "URL": {
          "$ref": "#/definitions/URL"
        }
      },
      "required": [
        "type",
        "rangeLength",
        "rangeStart",
        "URL"
      ]
    },
    "coverArt": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "type": {
          "type": "string",
          "enum": [
            "image"
          ]
        },
        "URL": {
          "$ref": "#/definitions/URL"
        },
        "accessibilityCaption": {
          "type": "string"
        }
      },
      "required": [
        "type",
        "URL"
      ]
    }
  }
}
